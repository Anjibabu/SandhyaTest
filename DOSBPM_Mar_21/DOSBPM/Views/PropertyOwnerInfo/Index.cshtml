@using DOSBPM.Models
@model DOSBPM.Models.PropertyOwnerInfo

@*@model DOSBPM.Models.PropertyOwnerOrganization*@

@{
	ViewBag.Title = "Property Owner Info";
}


<div class="container-fluid">
	@using (Html.BeginForm("Index", "PropertyOwnerInfo", FormMethod.Post))
	{
		@Html.AntiForgeryToken()


		


		<div class="form-group">
			<div class="col-md-12">

				<h3>Property Owner Information</h3>
				<i>
					If any fields are blank with an *, you must enter the missing informaiton in the appropriate field. The Informaiton listed below
					is pre-populated from user profile. If the information needs to be updated, please select edit below.
				</i>
				<br />

				<label><b>Select Stakeholder Type</b> </label><br />
				<div>
					@Html.DropDownListFor(model => model.PropertyOwnerType, (List<SelectListItem>)ViewBag.info, "--Select Stakeholder Type--", new { @class = "form-control", id = "ddTransTypes" })
				</div>
				 
				<br />
				<div class="col-md-6 ">
					<label><b>Search for Stakeholder</b></label><br>
					<div id="btnSearch" class="input-group col-lg-4 col-sm-6">
						<input id="serachText1" type="text" class="form-control" placeholder="search">
						<span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
					</div>

				</div>

				<br />

				<div class="col-md-12 ">
					@Html.CheckBox("Check this box to change or update information") &nbsp; Check this box to change or update information
					<br />
					@Html.CheckBox("Create new record") &nbsp; Create new record<br /><br />
				</div>
				<br />
				@*-------------PropertyOwnerOrganizationPage----------------------*@
				<div id="PropertyOwnerInformation" style="display:block">
					<div class="form-group">


						<div class="col-md-3">
							<lable class=" required">Organization Name</lable><br />
							@Html.TextBoxFor(x => x.OrganizationName, new { @class = "form-control" })
						</div>
						<div class="col-md-9">
							<lable>Authority in Charge of the Property </lable> <br />
							@Html.TextBoxFor(x => x.Authority, new { @class = "form-control", maxlength = "30" })
						</div>
						<div>
							@Html.Partial("_AddressInfo", Model.AddressInfo)
						</div>
						<br />


						<div class="col-md-12">
							<br /><br /><br /><br />
							<label>Comments</label><br />
							@Html.TextAreaFor(model => model.Comments, new { @class = "form-control", maxlength = "2000", @cols = "75", @rows = "3" })
						</div>

						<div class="col-md-12">
							<br /><br />
							<div class="col-md-3 text-left ">

								<input type="submit" id="btnNext" class="NextBtn btn btn-default" value="Previous" style="background-color:#a90606; color:white" onclick="location.href = '@Url.Action("Index", "QualifyingInfo")'" />

							</div>
							<div class="col-md-6 text-right ">

								<input type="submit" id="btnNext" class="NextBtn btn btn-default" value="Next" style="background-color:#a90606; color:white" />

							</div>
						</div>
						<div class="col-md-12">
							<br /><br /><br /><br /><br /><br />
						</div>
					</div>
				</div>
				@*--------------PropertyOwnerIndividualPage-----------------*@

				<div id="PropertyOwnerIndividualPage" style="display:none">
					<div class="form-group">
						<div class="col-md-3 ">
							<label class="required">First Name</label> <br />
							@Html.TextBoxFor(x => x.FirstName, new { @class = "form-control ", maxlength = "5", style = "padding:4px 6px" })
						</div>
						<div class="col-md-3">
							<label> Middle Name</label><br /> @Html.TextBoxFor(x => x.MiddleName, new { @class = "form-control", maxlength = "5" })
						</div>
						<div class="col-md-3">
							<label class="required">Last Name</label><br />
							@Html.TextBoxFor(x => x.LasttName, new { @class = "form-control", maxlength = "5" })
						</div>
						<div class="col-md-3">
							<label>Suffix</label><br />
							@Html.TextBoxFor(x => x.Suffix, new { @class = "form-control", maxlength = "5" })
						</div><br />

						<div class="col-md-3">
							<label>Authority in Charge of the Property  </label> <br />
							@Html.TextBoxFor(x => x.Authority, new { @class = "form-control", maxlength = "30" })
						</div>
						<div class="col-md-9">
							<label class="required">Job Title</label> Job Title <br />
							@Html.TextBoxFor(x => x.JobTitle, new { @class = "form-control", maxlength = "30" })
						</div>
						<br />
						<div class="col-md-3">
							<label class="required">Telephone Number</label>  <br />
							@Html.TextBoxFor(x => x.TelephoneNumber, new { @class = "form-control", maxlength = "10" })
						</div>
						<div class="col-md-9">
							<label class="required">EmailAddress</label><br />
							@Html.TextBoxFor(x => x.EmailAddress, new { @class = "form-control", maxlength = "10" })
						</div><br />
						<div class="col-md-12">
							PropertyOwner<br />
							@Html.TextBoxFor(x => x.PropertyOwner, new { @class = "form-control", maxlength = "10" })
						</div>
						<br />
						<div>
							@Html.Partial("_AddressInfo", Model.AddressInfo)
						</div>  <br />

						<div class="col-md-12">
							<br /><br /><br /><br />
							<label>Comments</label><br />
							@Html.TextAreaFor(model => model.Comments, new { @class = "form-control", maxlength = 2000, @cols = "75", @rows = "3" })
						</div>
					</div>
				</div>
			</div>
		</div>
	}
</div>
 

<script>
    function previousBtn_click() {
              location.href = '@Url.Action("Index", "QualifyingInfo")';
       }
    $('#ddTransTypes').change(function () {

        var selected = $(this).val();

		if (selected == "Property Owner Organization") {
            $("#PropertyOwnerIndividualPage").hide();
            $("#btnBack").hide();
			$("#PropertyOwnerInformation").show();
		}
		else if (selected == "Property Owner Individual") {
            $("#PropertyOwnerInformation").hide();
            $("#btnBack").hide();
			$("#PropertyOwnerIndividualPage").show();
		//} else if (selected == "Contact Person") {
		//	$("#PropertyOwnerInformation,#PropertyOwnerIndividualPage").hide();
		//	$("#ContactPerson").show();
		} else {
			$("#PropertyOwnerInformation,#PropertyOwnerIndividualPage").hide();
		}


    });

	$(document).ready(function () {
		$("#serachText1").autocomplete({
			source: function (request, response) {
				$.ajax({
					url: "/PropertyOwnerInfo/GetStackHolder",
					type: "POST",
					dataType: "json",
					data: { stackHolder: request.term },
					success: function (data) {
						response($.map(data, function (item) {
							console.log(item);
							return { label: item.FirstName, value: item.FirstName, address: item };
						}))

					}
				})
			},
			select: function(e, i) {

				console.log(i.item.address);
				var ads = i.item.address;

				$("#Address1").val(ads.Address1);
				$("#Address2").val(ads.Address2);
				$("#City").val(ads.City);
				$("#CountyId").val(ads.CountyId);

				$("#StateId").val(ads.StateId);
				$("#Zip").val(ads.Zip);
				$("#CountryId").val(ads.CountryId);
				$("#Zip4Format").val(ads.Zip4Format);
				
			},
			minLength:3,
			messages: {
				noResults: "", results: ""
			}
       });
	});

</script>
@*  *@